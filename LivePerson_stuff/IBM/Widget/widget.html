<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<title>LivePerson SDK client example 1</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script src="https://lpcdn.lpsnmedia.net/webagent/client-SDK.min.js"></script>
</head>
<body>
	<h1>Extract SDEs</h1>

	<div class="userId"></div>

	<div>
		<button class="userDevice" type="button" disabled></button>
		<button class="userOS" type="button" disabled></button>
	</div>

	<br>

	<script> 
		
		var SDK = lpTag.agentSDK || {};
		
		// Binds to retrieve visitor ID
		bindUser();
		
		function yourCallBack() {
			console.log("callback triggered");
		}

		function bindUser() {
			var bindId = "visitorInfo";
			SDK.bind(bindId, processData, yourCallBack());
		}
		function processData(data) {
			var visitorId = JSON.stringify(data.newValue.visitorId);
			var visitorDevice = JSON.stringify(data.newValue.device);
			var visitorOS = JSON.stringify(data.newValue.operatingSystem);
			var OS = visitorOS.split(" ")[0].replace(/['"]+/g, '');
			console.log(OS);
			$(".userId").html("Visitor ID: " + visitorId);
			$(".userDevice").html(visitorDevice);
			$(".userOS").html(visitorOS);

			console.log("USER OS: " + OS + " " + visitorOS.length);

			if(OS === "Windows" || OS === "WINDOWS") {
				//.userOS button goes blue
				$(".userOS").css({"background-color":"blue"});
			}
			else if(OS === "ANDROID"){
				//.userOS button goes green
				$(".userOS").css({'background-color' : 'green'});
			}
			else if(OS === "OSX"){
				$('.userOS').css({"background-color" : "white"});
			}
		}


	</script>

</body>
</html>